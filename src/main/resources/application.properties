spring.application.name=anpetna

server.port=8080
server.address=0.0.0.0

logging.level.org.springframework=info
logging.level.com.anpetna=debug

##================== 데이터베이스 ===================
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver

# 반드시 환경변수로만 세팅되게(누락 시 부팅 실패)
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}

spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=${SPRING_JPA_FORMAT_SQL:true}

spring.datasource.hikari.maximum-pool-size=${HIKARI_MAX_POOL_SIZE:10}
spring.datasource.hikari.minimum-idle=${HIKARI_MIN_IDLE:5}
spring.datasource.hikari.connection-timeout=${HIKARI_CONN_TIMEOUT:30000}
spring.datasource.hikari.validation-timeout=${HIKARI_VALIDATION_TIMEOUT:5000}


## =============== 스프링 시큐리티 부분 추가 설정 ====================
#logging.level.org.springframework.security=trace
logging.level.org.springframework.security=DEBUG
jwt.access-secret=this-is-a-very-long-access-secret-key-at-least-32-bytes!!
jwt.refresh-secret=this-is-a-very-long-refresh-secret-key-at-least-32-bytes!!

# 세션 저장소를 메모리로 변경 (StandardManager 비활성화)
# 임시 세션만 필요하고 서버 재시작 후에도 세션을 유지할 필요가 없을 때
server.servlet.session.persistent=false

## ====================== 멀티파트 설정 ============================
storage.location=${STORAGE_LOCATION:minio}

# 파일 저장/URL 설정
app.upload.url-base=/files
app.upload.dir=${APP_UPLOAD_DIR:/ubuntu/upload}
# (선택) 업로드 임시 디렉토리
spring.servlet.multipart.location=${SPRING_SERVLET_MULTIPART_LOCATION:/ubuntu/upload/tmp}

minio.url=${MINIO_URL}
minio.access-key=${MINIO_ACCESS_KEY}
minio.secret-key=${MINIO_SECRET_KEY}
minio.bucket=${MINIO_BUCKET}

# 파일업로드용 서블릿 동작 활성화
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=200MB

## 파일저장위치 지정 (리눅스에 배포시 변경필수)
## spring.servlet.multipart.location=c:\\upload
## 현재 프로젝트나 사용자 홈 디렉토리와는 상관없이 시스템 루트 기준
## spring.servlet.multipart.location=//mbc//upload

## ===================== 결제 api 설정 ==========================

toss.secret-key=${TOSS_SECRET_KEY}

## ===================== 지도 api 설정 ==========================

naver.geocode.client-id=${NAVER_GEOCODE_CLIENT_ID}
naver.geocode.client-secret=${NAVER_GEOCODE_CLIENT_SECRET}

## ===================== 배포/운영 설정 ==========================
# ----- Graceful Shutdown -----
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=30s

# ----- Actuator / Health & Probes (readiness/liveness) -----
management.endpoints.web.exposure.include=health,info
management.endpoint.health.probes.enabled=true
management.endpoint.health.show-details=never
management.health.db.enabled=true

frontend.api-url=${FRONT_API_URL}
# 업로드 과정
# 사용자가 파일 업로드 → Spring이 multipart.location에 임시 저장
# 서비스 로직에서 app.upload.dir로 이동 후 DB에 경로 기록

## ===================== 카카오 로그인 설정 ==========================

##spring.security.oauth2.client.provider.kakao.authorization-uri=https://kauth.kakao.com/oauth/authorize
##spring.security.oauth2.client.provider.kakao.user-name-attribute=id
##spring.security.oauth2.client.provider.kakao.user-info-uri=https://kapi.kakao.com/v2/user/me

##spring.security.oauth2.client.registration.kakao.client-name=kakao
##spring.security.oauth2.client.registration.kakao.authorization-grant-type=authorization_code
##spring.security.oauth2.client.registration.kakao.redirect_uri=http://192.168.0.000:8000/login/oauth2/code/kakao

## 카카오api -> REST API키
##spring.security.oauth2.client.registration.kakao.client-id=
## 카카오api -> 시크릿키
##spring.security.oauth2.client.registration.kakao.client-secret=

##spring.security.oauth2.client.registration.kakao.client-authentication-method=client_secret_post
##spring.security.oauth2.client.registration.kakao.scope=profile_nickname,account_email








